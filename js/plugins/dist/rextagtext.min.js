!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.rextagtext=e():t.rextagtext=e()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=261)}({1:function(t,e,n){"use strict";e.a={hleft:0,hcenter:1,hright:2,vtop:0,vcenter:1,vbottom:2,NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/}},10:function(t,e,n){"use strict";var i=n(7);e.a=function(t,e){var n=Array.isArray(t);for(var s in void 0===e?e=n?[]:{}:Object(i.a)(e),n&&(e.length=t.length),t)e[s]=t[s];return e}},11:function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.items=[]}var e,n,s;return e=t,(n=[{key:"destroy",value:function(){this.items.length=0,this.items=void 0}},{key:"pop",value:function(){return this.items.length>0?this.items.pop():null}},{key:"push",value:function(t){return this.items.push(t),this}},{key:"pushMultiple",value:function(t){return this.items.push.apply(this.items,t),t.length=0,this}}])&&i(e.prototype,n),s&&i(e,s),t}();e.a=s},12:function(t,e,n){"use strict";n.r(e);e.default=function(){}},134:function(t,e){var n=Phaser.Renderer.WebGL.Utils;t.exports=function(t,e,i,s,r){if(0!==e.width&&0!==e.height){var a=e.frame,o=a.width,h=a.height,l=n.getTintAppendFloatAlpha;this.pipeline.batchTexture(e,a.glTexture,o,h,e.x,e.y,o/e.style.resolution,h/e.style.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,o,h,l(e._tintTL,s.alpha*e._alphaTL),l(e._tintTR,s.alpha*e._alphaTR),l(e._tintBL,s.alpha*e._alphaBL),l(e._tintBR,s.alpha*e._alphaBR),e._isTinted&&e.tintFill,0,0,s,r)}}},135:function(t,e){t.exports=function(t,e,n,i,s){0!==e.width&&0!==e.height&&t.batchSprite(e,e.frame,i,s)}},162:function(t,e,n){"use strict";var i=n(55);e.a=function(t,e,n,s){var r=new i.a(this.scene,t,e,n,s);return this.scene.add.existing(r),r}},163:function(t,e,n){"use strict";var i=n(55),s=Phaser.Utils.Objects.GetAdvancedValue,r=Phaser.GameObjects.BuildGameObject;e.a=function(t,e){var n=s(t,"text",""),a=s(t,"style",null),o=s(t,"padding",null);null!==o&&(a.padding=o),void 0!==e&&(t.add=e);var h=new i.a(this.scene,0,0,n,a);return r(this.scene,h,t),h.autoRound=s(t,"autoRound",!0),h.resolution=s(t,"resolution",1),h}},261:function(t,e,n){"use strict";n.r(e);var i=n(162),s=n(163),r=n(55);Phaser.GameObjects.GameObjectFactory.register("rexTagText",i.a),Phaser.GameObjects.GameObjectCreator.register("rexTagText",s.a),e.default=r.a},33:function(t,e,n){"use strict";var i=Phaser.Display.Canvas.CanvasPool,s={},r=function(t){var e=i.create(this),n=e.getContext("2d");t.syncFont(e,n);var r=Math.ceil(n.measureText(t.testString).width*t.baselineX),a=r,o=2*a;a=a*t.baselineY|0,e.width=r,e.height=o,n.fillStyle="#f00",n.fillRect(0,0,r,o),n.font=t._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(t.testString,0,a);var h=s;if(!n.getImageData(0,0,r,o))return h.ascent=a,h.descent=a+6,h.fontSize=h.ascent+h.descent,i.remove(e),h;var l,u,f=n.getImageData(0,0,r,o).data,c=f.length,d=4*r,p=0,y=!1;for(l=0;l<a;l++){for(u=0;u<d;u+=4)if(255!==f[p+u]){y=!0;break}if(y)break;p+=d}for(h.ascent=a-l,p=c-d,y=!1,l=o;l>a;l--){for(u=0;u<d;u+=4)if(255!==f[p+u]){y=!0;break}if(y)break;p-=d}return h.descent=l-a,h.fontSize=h.ascent+h.descent,i.remove(e),h},a=n(1);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h=Phaser.Utils.Objects.GetAdvancedValue,l=Phaser.Utils.Objects.GetValue,u={backgroundColor:["backgroundColor",null],fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],underlineColor:["underline.color","#000"],underlineThickness:["underline.thickness",0],underlineOffset:["underline.offset",0],halign:["halign",0],valign:["valign",0],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],lineSpacing:["lineSpacing",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wrapMode:["wrap.mode",1],wrapWidth:["wrap.width",0]},f=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parent=e,this.backgroundColor,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.rtl,this.testString,this.baselineX,this.baselineY,this._font,this.setStyle(n,!1);var i=l(n,"metrics",!1);this.metrics=i?{ascent:l(i,"ascent",0),descent:l(i,"descent",0),fontSize:l(i,"fontSize",0)}:r(this)}var e,n,i;return e=t,(n=[{key:"setStyle",value:function(t,e){if(void 0===e&&(e=!0),t&&t.hasOwnProperty("halign")&&"string"==typeof t.halign&&(t.halign=c[t.halign.toLowerCase()]||0),t&&t.hasOwnProperty("valign")&&"string"==typeof t.valign&&(t.valign=d[t.valign.toLowerCase()]||0),t&&t.hasOwnProperty("wrap")){var n=t.wrap;if(n.hasOwnProperty("mode")){var i=n.mode;"string"==typeof i&&(n.mode=p[i])}else n.hasOwnProperty("width")&&(n.mode=1)}for(var s in t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),u)this[s]="wrapCallback"===s||"wrapCallbackScope"===s?l(t,u[s][0],u[s][1]):h(t,u[s][0],u[s][1]);var r=l(t,"font",null);this._font=null===r?this.fontStyle+" "+this.fontSize+" "+this.fontFamily:r;var a=l(t,"fill",null);return null!==a&&(this.color=a),e?this.update(!0):this.parent}},{key:"syncFont",value:function(t,e){e.font=this._font}},{key:"syncStyle",value:function(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"}},{key:"syncShadow",value:function(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}},{key:"update",value:function(t){return t&&(this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily,this.metrics=r(this)),this.parent.updateText(t)}},{key:"buildFont",value:function(){var t=this.fontStyle+" "+this.fontSize+" "+this.fontFamily;return t!==this._font&&(this._font=t),this}},{key:"setFont",value:function(t){return"string"==typeof t?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=l(t,"fontFamily","Courier"),this.fontSize=l(t,"fontSize","16px"),this.fontStyle=l(t,"fontStyle","")),this.update(!0)}},{key:"setFontFamily",value:function(t){return this.fontFamily=t,this.update(!0)}},{key:"setFontStyle",value:function(t){return this.fontStyle=t,this.update(!0)}},{key:"setFontSize",value:function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}},{key:"setTestString",value:function(t){return this.testString=t,this.update(!0)}},{key:"setFixedSize",value:function(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(!1)}},{key:"setResolution",value:function(t){return this.resolution=t,this.update(!1)}},{key:"setLineSpacing",value:function(t){return this.lineSpacing=t,this.update(!1)}},{key:"setBackgroundColor",value:function(t){return this.backgroundColor=t,this.update(!1)}},{key:"setFill",value:function(t){return this.color=t,this.update(!1)}},{key:"setColor",value:function(t){return this.color=t,this.update(!1)}},{key:"setStroke",value:function(t,e){return void 0===t?this.strokeThickness=0:(void 0===e&&(e=this.strokeThickness),this.stroke=t,this.strokeThickness=e),this.update(!0)}},{key:"setShadow",value:function(t,e,n,i,s,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n="#000"),void 0===i&&(i=0),void 0===s&&(s=!1),void 0===r&&(r=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=n,this.shadowBlur=i,this.shadowStroke=s,this.shadowFill=r,this.update(!1)}},{key:"setShadowOffset",value:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)}},{key:"setShadowColor",value:function(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)}},{key:"setShadowBlur",value:function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)}},{key:"setShadowStroke",value:function(t){return this.shadowStroke=t,this.update(!1)}},{key:"setShadowFill",value:function(t){return this.shadowFill=t,this.update(!1)}},{key:"setUnderline",value:function(t,e,n){return void 0===t&&(t="#000"),void 0===e&&(e=0),void 0===n&&(n=0),this.underlineColor=t,this.underlineThickness=e,this.underlineOffset=n,this.update(!1)}},{key:"setUnderlineColor",value:function(t){return void 0===t&&(t="#000"),this.underlineColor=t,this.update(!1)}},{key:"setUnderlineThickness",value:function(t){return void 0===t&&(t=0),this.underlineThickness=t,this.update(!1)}},{key:"setUnderlineOffset",value:function(t){return void 0===t&&(t=0),this.underlineOffset=t,this.update(!1)}},{key:"setWrapMode",value:function(t){return"string"==typeof t&&(t=p[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}},{key:"setWrapWidth",value:function(t){return this.wrapWidth=t,this.update(!1)}},{key:"setAlign",value:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),"string"==typeof t&&(t=c[t.toLowerCase()]||0),"string"==typeof e&&(e=c[e.toLowerCase()]||0),this.halign=t,this.valign=e,this.update(!1)}},{key:"setHAlign",value:function(t){return void 0===t&&(t=0),"string"==typeof t&&(t=c[t.toLowerCase()]||0),this.halign=t,this.update(!1)}},{key:"setVAlign",value:function(t){return void 0===t&&(t=0),"string"==typeof t&&(t=c[t.toLowerCase()]||0),this.valign=t,this.update(!1)}},{key:"setMaxLines",value:function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)}},{key:"getTextMetrics",value:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}},{key:"toJSON",value:function(){var t={};for(var e in u)t[e]=this[e];return t.metrics=this.getTextMetrics(),t}},{key:"destroy",value:function(){this.parent=void 0}},{key:"lineHeight",get:function(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}}])&&o(e.prototype,n),i&&o(e,i),t}(),c={left:a.a.hleft,center:a.a.hcenter,right:a.a.hright},d={top:a.a.vtop,center:a.a.vcenter,bottom:a.a.vbottom},p={none:a.a.NO_WRAP,word:a.a.WORD_WRAP,char:a.a.CHAR_WRAP,character:a.a.CHAR_WRAP};e.a=f},55:function(t,e,n){"use strict";var i=n(57);function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r={plainText:null,prevProp:null},a=new(n(33).a),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),void 0===e&&(e={}),this.tags=e}var e,n,i;return e=t,(n=[{key:"addTag",value:function(t,e){this.tags[t]=e}},{key:"splitText",value:function(t,e){for(var n,i,s,r=[],a=0,o=t.length,h=o;n=u.exec(t);)i=n[0],a<(h=u.lastIndex-i.length)&&r.push(t.substring(a,h)),void 0===e?r.push(i):1===e&&(f.test(i)?(s=i.match(c),r.push(s[2])):d.test(i)&&(s=i.match(p),r.push(s[2]))),a=u.lastIndex;return a<o&&r.push(t.substring(a,o)),r}},{key:"tagTextToProp",value:function(t,e){var n,i;if(f.test(t)){if(null!=(o=t.match(c))){var s=o[1],a=this.tags;(i=a.hasOwnProperty(s)?a[s]:{})._class=s,n=o[2]}}else if(d.test(t)){var o;if(null!=(o=t.match(p))){var l=o[1];(i=h(l))._style=l,n=o[2]}}null==n&&(n=t),null==i&&(i={});var u=r;return u.plainText=n,u.prop=i,u}},{key:"propToContextStyle",value:function(t,e){var n=a;if(e.hasOwnProperty("img"))n.image=e.img;else{if(n.image=null,e.hasOwnProperty("family")||e.hasOwnProperty("fontFamily")||e.hasOwnProperty("font-family")){var i=e.hasOwnProperty("family")?e.family:e.hasOwnProperty("fontFamily")?e.fontFamily:e["font-family"];n.fontFamily=i}else n.fontFamily=t.fontFamily;if(e.hasOwnProperty("size")||e.hasOwnProperty("fontSize")||e.hasOwnProperty("font-size")){var s=e.hasOwnProperty("size")?e.size:e.hasOwnProperty("fontSize")?e.fontSize:e["font-size"];"number"==typeof s&&(s=s.toString()+"px"),n.fontSize=s}else n.fontSize=t.fontSize;if(e.hasOwnProperty("style")||e.hasOwnProperty("fontStyle")||e.hasOwnProperty("font-style")){var r=e.hasOwnProperty("style")?e.style:e.hasOwnProperty("fontStyle")?e.fontStyle:e["font-style"];n.fontStyle=r}else n.fontStyle=t.fontStyle;if(e.hasOwnProperty("color")||e.hasOwnProperty("font-color")){e.hasOwnProperty("color")?e.color:e["font-color"];n.color=e.color}else n.color=t.color;if(e.hasOwnProperty("stroke")){var o=e.stroke;n.stroke=o.hasOwnProperty("color")?o.color:t.stroke,n.strokeThickness=o.hasOwnProperty("thinkness")?o.thinkness:t.strokeThickness}else n.stroke=t.stroke,n.strokeThickness=t.strokeThickness}if(e.hasOwnProperty("shadow")){var h=e.shadow;n.shadowColor=h.hasOwnProperty("color")?h.color:t.shadowColor,n.shadowOffsetX=h.hasOwnProperty("offsetX")?h.offsetX:t.shadowOffsetX,n.shadowOffsetY=h.hasOwnProperty("offsetY")?h.offsetY:t.shadowOffsetY,n.shadowBlur=h.hasOwnProperty("blur")?h.blur:t.shadowBlur,n.shadowStroke=!0,n.shadowFill=!0}else n.shadowColor=t.shadowColor,n.shadowOffsetX=t.shadowOffsetX,n.shadowOffsetY=t.shadowOffsetY,n.shadowBlur=t.shadowBlur,n.shadowStroke=t.shadowStroke,n.shadowFill=t.shadowFill;if(e.hasOwnProperty("u")||e.hasOwnProperty("underline")){var l=e.hasOwnProperty("u")?e.u:e.underline;n.underlineColor=l.hasOwnProperty("color")?l.color:t.underlineColor,n.underlineThickness=l.hasOwnProperty("thinkness")?l.thinkness:t.underlineThickness,n.underlineOffset=l.hasOwnProperty("offset")?l.offset:t.underlineOffset}else n.underlineColor=t.underlineColor,n.underlineThickness=t.underlineThickness,n.underlineOffset=t.underlineOffset;return n}},{key:"propToTagText",value:function(t,e,n){return e.hasOwnProperty("_class")?""===t&&this.isTextTag(e._class)?"":"<class='"+e._class+"'>"+t+"</class>":e.hasOwnProperty("_style")?"<style='"+e._style+"'>"+t+"</style>":void 0}},{key:"destroy",value:function(){this.tags=void 0}},{key:"isTextTag",value:function(t){var e=this.tags[t];return!!e&&null==e.img}}])&&s(e.prototype,n),i&&s(e,i),t}(),h=function(t){for(var e,n,i,s={},r=0,a=(t=t.split(";")).length;r<a;r++)if(n=(e=t[r].split(":"))[0],i=e[1],!l(n)&&!l(i)){switch(n){case"stroke":var o=i.split(" ");i={},(u=o.length)>=1&&(i.color=o[0]),u>=2&&(i.thinkness=parseInt(o[1].replace("px","")));break;case"shadow":var h=i.split(" ");i={},(u=h.length)>=1&&(i.color=h[0]),u>=2&&(i.offsetX=parseInt(h[1].replace("px",""))),u>=3&&(i.offsetY=parseInt(h[2].replace("px",""))),u>=4&&(i.blur=parseInt(h[3].replace("px","")));break;case"u":case"underline":var u,f=i.split(" ");i={},(u=f.length)>=1&&(i.color=f[0]),u>=2&&(i.thinkness=parseInt(f[1].replace("px",""))),u>=3&&(i.offset=parseInt(f[2].replace("px","")))}s[n]=i}return s},l=function(t){return 0===(t=t.replace(y,"")).length},u=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,f=/<\s*class=/i,c=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,d=/<\s*style=/i,p=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,y=/^\s+|\s+$/,g=o;function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function x(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function k(t,e,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}(t,e);if(i){var s=Object.getOwnPropertyDescriptor(i,e);return s.get?s.get.call(n):s.value}})(t,e,n||t)}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var P=Phaser.Utils.Objects.GetValue,T=function(t){function e(t,n,i,s,r){var a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=P(r,"tags",void 0),h=new g(o);return(a=x(this,m(e).call(this,t,n,i,s,r,"rexTagText",h))).parser=h,a}var n,s,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(e,i["a"]),n=e,(s=[{key:"addTag",value:function(t,e){return this.parser.addTag(t,e),this.updateText(!0)}},{key:"addTags",value:function(t){for(var e in t)this.parser.addTag(e,t[e]);return this.updateText(!0)}},{key:"preDestroy",value:function(){k(m(e.prototype),"preDestroy",this).call(this),this.parser.destroy(),this.parser=void 0}}])&&w(n.prototype,s),r&&w(n,r),e}();e.a=T},57:function(t,e,n){"use strict";var i=n(71),s=n.n(i),r=n(33),a=n(1),o=(a.a.hleft,a.a.hcenter),h=a.a.hright,l=(a.a.vtop,a.a.vcenter),u=a.a.vbottom,f={draw:function(t,e,n,i){var s=this.penManager;this.hitAreaManager.clear();var r=this.context;r.save(),this.drawBackground(this.defatultStyle.backgroundColor);var a=this.defatultStyle;t+=this.startXOffset,e+=this.startYOffset;var f,c,d,p,y,g,v=a.halign,w=a.valign,x=a.lineHeight,k=s.lines,m=k.length,S=a.maxLines;S>0&&m>S?(c=S,d=w===l?Math.floor((m-c)/2):w===u?m-c:0):(c=m,d=0),p=d+c,g=w===l?Math.max((i-c*x)/2,0):w===u?Math.max(i-c*x-2,0):0,g+=e;for(var P=d;P<p;P++)if(0!==(f=s.getLineWidth(P))){y=v===o?(n-f)/2:v===h?n-f:0,y+=t;for(var T=k[P],b=0,O=T.length;b<O;b++)this.drawPen(T[b],y,g)}r.restore()},drawPen:function(t,e,n){e+=t.x,n+=t.y;var i=this.canvas,s=this.context;s.save();var r=this.parser.propToContextStyle(this.defatultStyle,t.prop);r.buildFont(),r.syncFont(i,s),r.syncStyle(i,s),r.underlineThickness>0&&t.width>0&&this.drawUnderline(e,n,t.width,r),t.isTextPen&&this.drawText(e,n,t.text,r),t.isImagePen&&this.drawImage(e,n,t.prop.img,r),s.restore(),t.hasAreaMarker&&t.width>0&&this.hitAreaManager.add(t.prop.area,e,n-this.startYOffset,t.width,this.defatultStyle.lineHeight)},clear:function(){var t=this.canvas;this.context.clearRect(0,0,t.width,t.height)},drawBackground:function(t){null!==t&&(this.context.fillStyle=t,this.context.fillRect(0,0,this.canvas.width,this.canvas.height))},drawUnderline:function(t,e,n,i){e+=i.underlineOffset-i.underlineThickness/2,this.autoRound&&(t=Math.round(t),e=Math.round(e));var s=this.context,r=s.lineCap;s.lineCap="butt",s.beginPath(),s.strokeStyle=i.underlineColor,s.lineWidth=i.underlineThickness,s.moveTo(t,e),s.lineTo(t+n,e),s.stroke(),s.lineCap=r},drawText:function(t,e,n,i){this.autoRound&&(t=Math.round(t),e=Math.round(e));var s=this.context;i.strokeThickness&&(i.syncShadow(s,i.shadowStroke),s.strokeText(n,t,e)),i.color&&"none"!==i.color&&(i.syncShadow(s,i.shadowFill),s.fillText(n,t,e))},drawImage:function(t,e,n,i){var s=this.parent.imageManager,r=s.get(n),a=s.getFrame(n);t+=r.left,e+=-this.startYOffset+r.y,this.autoRound&&(t=Math.round(t),e=Math.round(e)),this.context.drawImage(a.source.image,a.cutX,a.cutY,a.cutWidth,a.cutHeight,t,e,r.width,r.height)}},c=n(11);function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var p=Phaser.Utils.Objects.GetValue,y=a.a.NO_NEWLINE,g=a.a.RAW_NEWLINE,v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.prop={},this.resetFromJSON(e)}var e,n,i;return e=t,(n=[{key:"resetFromJSON",value:function(t){this.text=p(t,"text",""),this.x=p(t,"x",0),this.y=p(t,"y",0),this.width=p(t,"width",0);var e=p(t,"prop",null);null===e&&(e={}),this.prop=e,this.newLineMode=p(t,"newLineMode",0),this.startIndex=p(t,"startIndex",0)}},{key:"plainText",get:function(){var t=this.text;return this.newLineMode===g&&(t+="\n"),t}},{key:"wrapText",get:function(){var t=this.text;return this.newLineMode!==y&&(t+="\n"),t}},{key:"rawTextLength",get:function(){var t=this.text.length;return this.newLineMode===g&&(t+=1),t}},{key:"endIndex",get:function(){return this.startIndex+this.rawTextLength}},{key:"lastX",get:function(){return this.x+this.width}},{key:"isTextPen",get:function(){return""!==this.text}},{key:"isImagePen",get:function(){return!!this.prop.img}},{key:"hasAreaMarker",get:function(){return!!this.prop.area}}])&&d(e.prototype,n),i&&d(e,i),t}(),w=n(10),x=n(12);function k(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var m=Phaser.Utils.Objects.GetFastValue,S=a.a.NO_NEWLINE,P=a.a.WRAPPED_NEWLINE,T=new c.a,b=new c.a,O=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.PensPool=m(e,"pensPool",T),this.LinesPool=m(e,"linesPool",b),this.tagToText=m(e,"tagToText",x.default),this.tagToTextScope=m(e,"tagToTextScope",void 0)}var e,n,i;return e=t,(n=[{key:"destroy",value:function(){this.freePens(),this.tagToText=void 0,this.tagToTextScope=void 0}},{key:"freePens",value:function(){for(var t=0,e=this.lines.length;t<e;t++)this.lines[t].length=0;this.PensPool.pushMultiple(this.pens),this.LinesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}},{key:"addTextPen",value:function(t,e,n,i,s,r){var a=this.PensPool.pop();return null==a&&(a=new v),M.text=t,M.x=e,M.y=n,M.width=i,M.prop=s,M.newLineMode=r,a.resetFromJSON(M),this.addPen(a),this}},{key:"addImagePen",value:function(t,e,n,i){return this.addTextPen("",t,e,n,i,S),this}},{key:"addNewLinePen",value:function(){var t=this.lastPen,e=t?t.lastX:0,n=t?t.y:0,i=t?Object(w.a)(t.prop):null;return this.addTextPen("",e,n,0,i,P),this}},{key:"addPen",value:function(t){var e=this.lastPen;t.startIndex=null==e?0:e.endIndex,this.pens.push(t);var n=this.lastLine;null==n&&(n=this.LinesPool.pop()||[],this.lines.push(n)),n.push(t),t.newLineMode!==S&&(n=this.LinesPool.pop()||[],this.lines.push(n)),this.maxLinesWidth=void 0}},{key:"clone",value:function(e){null==e&&(e=new t),e.freePens();for(var n=0,i=this.lines.length;n<i;n++)for(var s=this.lines[n],r=0,a=s.length;r<a;r++){var o=s[r];e.addPen(o.text,o.x,o.y,o.width,Object(w.a)(o.prop),o.newLineMode)}return e}},{key:"getLineStartIndex",value:function(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var e=this.lines[t];return e&&e[0]?e[0].startIndex:0}},{key:"getLineEndIndex",value:function(t){t>=this.lines.length&&(t=this.lines.length-1);var e,n,i=!1;for(e=t;e>=0&&!(i=null!=(n=this.lines[e])&&n.length>0);e--);return i?n[n.length-1].endIndex:0}},{key:"getLineWidth",value:function(t){var e=this.lines[t];if(!e)return 0;var n=e[e.length-1];return null==n?0:n.lastX}},{key:"getMaxLineWidth",value:function(){if(void 0!==this.maxLinesWidth)return this.maxLinesWidth;for(var t,e=0,n=0,i=this.lines.length;n<i;n++)(t=this.getLineWidth(n))>e&&(e=t);return this.maxLinesWidth=e,e}},{key:"getLineWidths",value:function(){for(var t=[],e=0,n=this.lines.length;e<n;e++)t.push(this.getLineWidth(e));return t}},{key:"getSliceTagText",value:function(t,e,n){if(void 0===t&&(t=0),void 0===e){var i=this.lastPen;if(null==i)return"";e=i.endIndex}void 0===n&&(n=!1);for(var s,r,a,o,h,l,u="",f=0,c=this.pens.length;f<c&&((o=(s=this.pens[f]).endIndex)<=t||(s=this.pens[f],r=n?s.wrapText:s.plainText,h=s.prop,(a=s.startIndex)>=t&&o<=e||(r=r.substring(t-a,e-a)),this.tagToTextScope?u+=this.tagToText.call(this.tagToTextScope,r,h,l):u+=this.tagToText(r,h,l),l=h,!(o>=e)));f++);return u}},{key:"lastPen",get:function(){return this.pens[this.pens.length-1]}},{key:"lastLine",get:function(){return this.lines[this.lines.length-1]}},{key:"linesCount",get:function(){return this.lines.length}},{key:"plainText",get:function(){for(var t="",e=this.pens,n=0,i=e.length;n<i;n++)t+=e[n].plainText;return t}},{key:"rawTextLength",get:function(){for(var t=0,e=this.pens,n=0,i=this.pens.length;n<i;n++)t+=e[n].rawTextLength;return t}}])&&k(e.prototype,n),i&&k(e,i),t}(),M={},C=O;function L(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var W=Phaser.Geom.Rectangle,_=new c.a,F=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hitAreas=[]}var e,n,i;return e=t,(n=[{key:"destroy",value:function(){this.clear()}},{key:"clear",value:function(){return _.pushMultiple(this.hitAreas),this}},{key:"add",value:function(t,e,n,i,s){var r=_.pop();return null===r?r=new W(e,n,i,s):r.setTo(e,n,i,s),r.key=t,this.hitAreas.push(r),this}},{key:"contains",value:function(t,e){for(var n,i=this.hitAreas,s=0,r=i.length;s<r;s++)if((n=i[s]).contains(t,e))return n.key;return!1}},{key:"drawBounds",value:function(t,e,n){void 0===e&&(e=16777215),n&&t.save().scaleCanvas(n.scaleX,n.scaleY).rotateCanvas(n.rotation).translateCanvas(n.x,n.y);for(var i,s=this.hitAreas,r=0,a=s.length;r<a;r++)i=s[r],t.lineStyle(1,e).strokeRect(i.x,i.y,i.width,i.height);return n&&t.restore(),this}}])&&L(e.prototype,n),i&&L(e,i),t}(),A=function(t,e,n,i){var s=this.hitAreaManager.contains(n,i);!1!==s&&(this.parent.emit("".concat(t,"-").concat(s),e,n,i),this.parent.emit(t,s,e,n,i))},R=function(){this.parent.on("pointerdown",function(t,e,n,i){A.call(this,"areadown",t,e,n)},this).on("pointerup",function(t,e,n,i){A.call(this,"areaup",t,e,n)},this)},j=a.a.NO_NEWLINE,I=a.a.RAW_NEWLINE,E=a.a.WRAPPED_NEWLINE,z=a.a.NO_WRAP,N=a.a.WORD_WRAP,X=(a.a.CHAR_WRAP,a.a.SPLITREGEXP),B=[],Y=new c.a;Y.newline=function(t,e,n){var i=this.pop();return null===i&&(i={}),i.text=t,i.width=e,i.newLineMode=n,i};var H=function(t,e,n,i,s){i<=0&&(n=z);var r=B;if(Y.pushMultiple(r),!t||!t.length)return r;for(var a,o,h,l=t.split(X),u=0,f=l.length;u<f;u++)if(a=l[u],h=u===f-1?j:I,n!==z){var c,d;if(o=0===u?i-s:i,a.length<=100&&(k=e(a))<=o){r.push(Y.newline(a,k,h));continue}for(var p,y="",g="",v=0,w=0,x=(c=n===N?a.split(" "):a).length;w<x;w++)d=c[w],n===N?(y+=d,w<x-1&&(y+=" ")):y+=d,(p=e(y))>o&&(0===w?r.push(Y.newline("",0,E)):(r.push(Y.newline(g,v,E)),y=d,n===N&&w<x-1&&(y+=" "),p=e(y)),o=i),g=y,v=p;r.push(Y.newline(g,v,h))}else{var k=e(a);r.push(Y.newline(a,k,h))}return r};function G(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var D=Phaser.Utils.Objects.GetValue,U=a.a.NO_WRAP,V=a.a.NO_NEWLINE,J=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parent=e.parent,this.context=D(e,"context",null),this.canvas=this.context.canvas,this.parser=D(e,"parser",null),this.defatultStyle=D(e,"style",null),this.autoRound=!0,this.pensPool=D(e,"pensPool",null),this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new F;var n=this.context;this.getTextWidth=function(t){return n.measureText(t).width}}var e,n,i;return e=t,(n=[{key:"destroy",value:function(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defatultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}},{key:"updatePenManager",value:function(t,e,n,i,s){if(void 0===s&&(s=this.penManager),s.freePens(),""===t)return s;for(var r,a,o,h,l,u=this.canvas,f=this.context,c=0,d=0,p=this.parser.splitText(t),y=0,g=p.length;y<g;y++)if(r=(h=this.parser.tagTextToProp(p[y],a)).plainText,(a=h.prop).img){var v=this.imageManager.getOuterWidth(a.img);n>0&&e!==U&&n<c+v&&(s.addNewLinePen(),d+=i,c=0),s.addImagePen(c,d,v,Object(w.a)(a)),c+=v}else if(""!==r){var x;this.context.save(),(o=this.parser.propToContextStyle(this.defatultStyle,a)).buildFont(),o.syncFont(u,f),o.syncStyle(u,f);for(var k=0,m=(l=H(r,this.getTextWidth,e,n,c)).length;k<m;k++)x=l[k],s.addTextPen(x.text,c,d,x.width,Object(w.a)(a),x.newLineMode),x.newLineMode!==V?(c=0,d+=i):c+=x.width;this.context.restore()}return s}},{key:"newPenManager",value:function(){return new C({pensPool:this.pensPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}},{key:"getPlainText",value:function(t,e,n){var i;if(null==t)i=this.penManager.plainText;else{var s=this.parser.splitText(t,1);i="";for(var r=0,a=s.length;r<a;r++)i+=s[r]}return null==e&&null==n||(null==e&&(e=0),null==n&&(n=i.length),i=i.substring(e,n)),i}},{key:"getPenManager",value:function(t,e){if(void 0===t)return this.copyPenManager(e,this.penManager);void 0===e&&(e=this.newPenManager());var n=this.defatultStyle;return this.updatePenManager(t,n.wrapMode,n.wrapWidth,n.lineHeight,e),e}},{key:"getText",value:function(t,e,n,i){if(null==t)return this.penManager.getSliceTagText(e,n,i);var s=this.tmpPenManager,r=this.defatultStyle;return this.updatePenManager(t,r.wrapMode,r.wrapWidth,r.lineHeight,s),s.getSliceTagText(e,n,i)}},{key:"copyPenManager",value:function(t,e){return void 0===e&&(e=this.penManager),e.copy(t)}},{key:"getTextWidth",value:function(t){return void 0===t&&(t=this.penManager),t.getMaxLineWidth()}},{key:"getLastPen",value:function(t){return void 0===t&&(t=this.penManager),t.lastPen}},{key:"startXOffset",get:function(){return this.defatultStyle.strokeThickness/2}},{key:"startYOffset",get:function(){var t=this.defatultStyle;return t.strokeThickness/2+t.metrics.ascent}},{key:"lines",get:function(){return this.penManager.lines}},{key:"desplayLinesCount",get:function(){var t=this.penManager.linesCount,e=this.defatultStyle.maxLines;return e>0&&t>e&&(t=e),t}},{key:"linesWidth",get:function(){return this.penManager.getMaxLineWidth()}},{key:"linesHeight",get:function(){var t=this.desplayLinesCount,e=this.defatultStyle.lineHeight*t;return t>0&&(e-=this.defatultStyle.lineSpacing),e}},{key:"imageManager",get:function(){return this.parent.imageManager}},{key:"tmpPenManager",get:function(){return null===this._tmpPenManager&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}}])&&G(e.prototype,n),i&&G(e,i),t}(),q={setInteractive:R};Object.assign(J.prototype,f,q);var $=J;function K(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Q,Z=Phaser.Utils.Objects.GetValue,tt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.textureManager=e,this.images={}}var e,n,i;return e=t,(n=[{key:"add",value:function(t,e){if("string"==typeof t)this._add(t,e);else if(Array.isArray(t))for(var n=0,i=(s=t).length;n<i;n++)this._add(s[n]);else{var s=t;for(var t in s)this._add(t,s[t])}return this}},{key:"_add",value:function(t,e){void 0===e&&(e={key:t});var n=e.key,i=e.frame,s=e.width,r=e.height;if(void 0===s||void 0===r){var a=this.textureManager.getFrame(n,i),o=a?a.cutWidth:0,h=a?a.cutHeight:0;void 0===s&&void 0===r?(s=o,r=h):void 0===s?s=o*(r/h):void 0===r&&(r=h*(s/o))}this.images[t]={key:n,frame:i,width:s,height:r,y:Z(e,"y",0),left:Z(e,"left",0),right:Z(e,"right",0)}}},{key:"remove",value:function(t){return this.images.hasOwnProperty(t)&&delete this.images[t],this}},{key:"get",value:function(t){return this.images.hasOwnProperty(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}},{key:"getOuterWidth",value:function(t){var e=this.get(t);return e?e.width+e.left+e.right:0}},{key:"getFrame",value:function(t){var e=this.get(t);return e?this.textureManager.getFrame(e.key,e.frame):void 0}},{key:"hasTexture",value:function(t){return!!this.getFrame(t)}}])&&K(e.prototype,n),i&&K(e,i),t}();function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var nt=Phaser.DOM.AddToDOM,it=Phaser.Display.Canvas.CanvasPool,st=Phaser.GameObjects.Components,rt=Phaser.GameObjects.GameObject,at=Phaser.Utils.Objects.GetValue,ot=Phaser.DOM.RemoveFromDOM,ht=a.a.SPLITREGEXP,lt={},ut=new Phaser.Class({Extends:rt,Mixins:[st.Alpha,st.BlendMode,st.ComputedSize,st.Crop,st.Depth,st.Flip,st.GetBounds,st.Mask,st.Origin,st.Pipeline,st.ScrollFactor,st.Tint,st.Transform,st.Visible,s.a],initialize:function(t,e,n,i,s,a,o){if(void 0===e&&(e=0),void 0===n&&(n=0),rt.call(this,t,a),this.renderer=t.sys.game.renderer,this.setPosition(e,n),this.setOrigin(0,0),this.initPipeline(),this.canvas=it.create(this),this.context=this.canvas.getContext("2d"),s&&s.hasOwnProperty("align")){var h=s.align;delete s.align,s.halign=h}this.style=new r.a(this,s),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=t.sys.game.config.resolution),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),lt.hasOwnProperty(a)||(lt[a]=new c.a),this.canvasText=new $({parent:this,context:this.context,parser:o,style:this.style,pensPool:lt[a]}),s&&s.padding&&this.setPadding(s.padding),this.setText(i),t.sys.game.config.renderType===Phaser.WEBGL&&t.sys.game.renderer.onContextRestored(function(){this.dirty=!0},this)},text:{set:function(t){this.setText(t)},get:function(){return this._text}},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",nt(this.canvas,this.scene.sys.canvas),this.originX=1)},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this},setStyle:function(t){return this.style.setStyle(t)},setFont:function(t){return this.style.setFont(t)},setFontFamily:function(t){return this.style.setFontFamily(t)},setFontSize:function(t){return this.style.setFontSize(t)},setFontStyle:function(t){return this.style.setFontStyle(t)},setFixedSize:function(t,e){return this.style.setFixedSize(t,e)},setBackgroundColor:function(t){return this.style.setBackgroundColor(t)},setFill:function(t){return this.style.setFill(t)},setColor:function(t){return this.style.setColor(t)},setStroke:function(t,e){return this.style.setStroke(t,e)},setShadow:function(t,e,n,i,s,r){return this.style.setShadow(t,e,n,i,s,r)},setShadowOffset:function(t,e){return this.style.setShadowOffset(t,e)},setShadowColor:function(t){return this.style.setShadowColor(t)},setShadowBlur:function(t){return this.style.setShadowBlur(t)},setShadowStroke:function(t){return this.style.setShadowStroke(t)},setShadowFill:function(t){return this.style.setShadowFill(t)},setWrapMode:function(t){return this.style.setWrapMode(t)},setWrapWidth:function(t){return this.style.setWrapWidth(t)},setAlign:function(t){return this.style.setHAlign(t)},setLineSpacing:function(t){return this.style.setLineSpacing(t)},setPadding:function(t,e,n,i){if("object"===et(t)){var s=t,r=at(s,"x",null);null!==r?(t=r,n=r):(t=at(s,"left",0),n=at(s,"right",t));var a=at(s,"y",null);null!==a?(e=a,i=a):(e=at(s,"top",0),i=at(s,"bottom",e))}else void 0===t&&(t=0),void 0===e&&(e=t),void 0===n&&(n=t),void 0===i&&(i=e);return this.padding.left=t,this.padding.top=e,this.padding.right=n,this.padding.bottom=i,this.updateText(!1)},setResolution:function(t){return this.style.setResolution(t)},setMaxLines:function(t){return this.style.setMaxLines(t)},updateText:function(t){void 0===t&&(t=!0);var e=this.canvasText,n=this.style;t&&e.updatePenManager(this._text,n.wrapMode,n.wrapWidth,n.lineHeight);var i,s,r=this.padding;0===n.fixedWidth?(this.width=e.linesWidth+r.left+r.right,i=e.linesWidth):(this.width=n.fixedWidth,(i=this.width-r.left-r.right)<e.linesWidth&&(i=e.linesWidth)),0===n.fixedHeight?(this.height=e.linesHeight+r.top+r.bottom,s=e.linesHeight):(this.height=n.fixedHeight,(s=this.height-r.top-r.bottom)<e.linesHeight&&(s=e.linesHeight));var a=this.width,o=this.height;this.updateDisplayOrigin();var h=n.resolution;a*=h,o*=h,a=Math.max(Math.ceil(a),1),o=Math.max(Math.ceil(o),1);var l=this.canvas,u=this.context;l.width!==a||l.height!==o?(l.width=a,l.height=o,this.frame.setSize(a,o)):u.clearRect(0,0,a,o),u.save(),u.scale(h,h),e.draw(r.left,r.top,i,s),u.restore(),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(l,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=this.width,f.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},toJSON:function(){var t=st.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t},preDestroy:function(){this.style.rtl&&ot(this.canvas),it.remove(this.canvas),this.canvasText.destroy()},setInteractive:function(t,e,n){return rt.prototype.setInteractive.call(this,t,e,n),this.canvasText.setInteractive(),this},getWrappedText:function(t,e,n){return(t=this.canvasText.getText(t,e,n,!0)).split(ht)},getPlainText:function(t,e,n){return this.canvasText.getPlainText(t,e,n)},getText:function(t,e,n){return this.canvasText.getText(t,e,n,!1)},getSubString:function(t,e,n){return this.getText(t,e,n)},copyPenManager:function(t){return this.canvasText.copyPenManager(t)},getPenManager:function(t,e){return this.canvasText.getPenManager(t,e)},setSize:function(t,e){return this.setFixedSize(t,e)},resize:function(t,e){return this.setFixedSize(t,e)},lineSpacing:{get:function(){return this.style.lineSpacing},set:function(t){this.setLineSpacing(t)}},imageManager:{get:function(){return t=this.scene.textures,void 0===Q&&(Q=new tt(t)),Q;var t}},addImage:function(t,e){return this.imageManager.add(t,e),this},drawAreaBounds:function(t,e){return this.canvasText.hitAreaManager.drawBounds(t,e,this),this}});e.a=ut},7:function(t,e,n){"use strict";e.a=function(t){if(Array.isArray(t))t.length=0;else for(var e in t)delete t[e]}},71:function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=n(12),r=n(12);i(!0)&&(s=n(134)),i(!0)&&(r=n(135)),t.exports={renderWebGL:s,renderCanvas:r}}}).default});